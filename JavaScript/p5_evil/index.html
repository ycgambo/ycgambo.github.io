<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">






  
  
    
  
  <link rel="stylesheet" media="all" href="https://cdn.jsdelivr.net/npm/han-css@3.3.0/dist/han.min.css">




<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
    
  
  <link href="https://cdn.jsdelivr.net/npm/jquery.fancybox@2.1.5/source/jquery.fancybox.min.css" rel="stylesheet" type="text/css">







  

<link href="https://cdn.jsdelivr.net/npm/font-awesome@4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css">









  <meta name="keywords" content="JavaScript,p5.js,">





  <link rel="alternate" href="/atom.xml" title="ycgambo の blog" type="application/atom+xml">






<meta name="description" content="游戏规则:  每一回合,你需要在不知道对方出招的情况下,选择合作或者侵略 合作方拿出3分,侵略方拿出2分,作为成本; 双方都选择合作时,双方均能收回成本,并获取收益; 侵略方的成本无法产生收益,但可以掠夺对方的成本作为收益。 双方合作,各加3分,成本获利率100%; 某方侵略,合作方减3分,侵略方加3分,成本获利率150%; 互相侵略,分数高者加1分，分数低者减3分，分数相同时各减1分 每回合结束">
<meta name="keywords" content="JavaScript,p5.js">
<meta property="og:type" content="article">
<meta property="og:title" content="善恶游戏">
<meta property="og:url" content="http://www.notee.cc/JavaScript/p5_evil/index.html">
<meta property="og:site_name" content="ycgambo の blog">
<meta property="og:description" content="游戏规则:  每一回合,你需要在不知道对方出招的情况下,选择合作或者侵略 合作方拿出3分,侵略方拿出2分,作为成本; 双方都选择合作时,双方均能收回成本,并获取收益; 侵略方的成本无法产生收益,但可以掠夺对方的成本作为收益。 双方合作,各加3分,成本获利率100%; 某方侵略,合作方减3分,侵略方加3分,成本获利率150%; 互相侵略,分数高者加1分，分数低者减3分，分数相同时各减1分 每回合结束">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2020-09-10T09:30:26.040Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="善恶游戏">
<meta name="twitter:description" content="游戏规则:  每一回合,你需要在不知道对方出招的情况下,选择合作或者侵略 合作方拿出3分,侵略方拿出2分,作为成本; 双方都选择合作时,双方均能收回成本,并获取收益; 侵略方的成本无法产生收益,但可以掠夺对方的成本作为收益。 双方合作,各加3分,成本获利率100%; 某方侵略,合作方减3分,侵略方加3分,成本获利率150%; 互相侵略,分数高者加1分，分数低者减3分，分数相同时各减1分 每回合结束">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":true,"transition":{"coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: 'JUUGFS7COU',
      apiKey: '82588b534e51902f4dc69b634820db94',
      indexName: 'notee.cc',
      hits: {"per_page":10},
      labels: {"input_placeholder":"站内搜索","hits_empty":"未找到以下内容: ${query}","hits_stats":"找到${hits} 条结果，耗时${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.notee.cc/JavaScript/p5_evil/">





  <title>善恶游戏 | ycgambo の blog</title>
  








  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?4716139578ba663fce5dcb869ad255aa";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> 
        <div class="music-player">
          <i class="fa fa-music"></i>
          <audio src="http://other.web.rm01.sycdn.kuwo.cn/resource/n1/65/67/1020655236.mp3" style="display:none">
        </audio></div><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ycgambo の blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description"><br><br><br></h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-send"></i> <br>
            
            更多
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



      </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.notee.cc/JavaScript/p5_evil/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="weiqi.guo">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ycgambo の blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">善恶游戏</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-02-02T00:00:00+08:00">
                2020-02-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          
             <span id="/JavaScript/p5_evil/" class="leancloud_visitors" data-flag-title="善恶游戏">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        <p>游戏规则:</p>
<ol>
<li>每一回合,你需要在不知道对方出招的情况下,选择合作或者侵略</li>
<li>合作方拿出3分,侵略方拿出2分,作为成本;</li>
<li>双方都选择合作时,双方均能收回成本,并获取收益;<br>
侵略方的成本无法产生收益,但可以掠夺对方的成本作为收益。<br>
双方合作,各加3分,成本获利率100%;<br>
某方侵略,合作方减3分,侵略方加3分,成本获利率150%;<br>
互相侵略,分数高者加1分，分数低者减3分，分数相同时各减1分</li>
<li>每回合结束后，生存的玩家同时失去/获得指定分数，来模拟环境是否恶劣</li>
<li>每个人起始20分,小于3分则失去继续游戏资格</li>
<li>每回合将所有人随机两两配对，当仅剩一名玩家或300回合后游戏结束</li>
</ol>
<p>游戏主体类型:</p>
<ol>
<li>吃哑巴亏：始终合作</li>
<li>善意试探：如果双方尚未合作,首先合作,之后重复对方上一步的行动</li>
<li>恶意试探：如果双方尚未合作,首先侵略,之后重复对方上一步的行动</li>
<li>欺软怕硬：对方分数低于自己则侵略,否则合作</li>
<li>无脑侵占：始终侵略</li>
</ol>
<a id="more"></a>
<p>环境附加分数（即游戏规则4中的环境因素）随机为-3~3，刷新页面即可重置</p>
<h2 id="此次模拟的动画"><a class="markdownIt-Anchor" href="#此次模拟的动画"></a> 此次模拟的动画</h2>
<div id="p5Container" style="width: 100%;overflow: hidden;"><style type="text/css">.p5Canvas{margin: 0 auto;display: block !important;}</style><script src="https://cdn.jsdelivr.net/npm/p5@0.7.1/lib/p5.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lodash@4.17.11/lodash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/ismobilejs@0.5.1/dist/isMobile.min.js"></script></div>
<div id="echartContainer" style="width: 100%; height:600px;text-align: center;line-height: 600px;">等待生成报告...<script src="https://cdn.jsdelivr.net/npm/echarts@4.6.0/dist/echarts.min.js"></script></div>
<h2 id="下面是几个典型的数据"><a class="markdownIt-Anchor" href="#下面是几个典型的数据"></a> 下面是几个典型的数据</h2>
<div id="echartContainer-3" style="width: 100%; height:600px;text-align: center;line-height: 600px;">环境-3,等待生成报告...</div>
<div id="echartContainer-1" style="width: 100%; height:600px;text-align: center;line-height: 600px;">环境-1,等待生成报告...</div>
<div id="echartContainer0" style="width: 100%; height:600px;text-align: center;line-height: 600px;">无环境影响,等待生成报告...</div>
<div id="echartContainer1" style="width: 100%; height:600px;text-align: center;line-height: 600px;">环境+1,等待生成报告...</div>
<div id="echartContainer3" style="width: 100%; height:600px;text-align: center;line-height: 600px;">环境+3,等待生成报告...</div>
<script>
var startupScore = 20 // 起始分数，代表初始资源量
var aliveBonus = Math.floor(Math.random() * 6, 1) - 3 // 生存环境附加分，代表环境是否恶劣
var size = 50 // 矩阵大小，群体规模
var nodeSize = 12 // 节点方块大小
var mobileSize = 40 // 手机端矩阵大小
var mobileNodeSize = 6 // 手机端节点方块大小

function Node(p5, x, y, size) {
    this.x = x;
    this.y = y;
    this.size = size;
    this.fill = '0'
    this.$ = p5
    this.type = 0;
    this.score = 100;
    this.memories = {};
}
Node.prototype.attackOrNot = function (targetNode) {
    switch (this.type) {
        case 0:
            return false
        case 1:
            return _.get(this.memories, String(targetNode.x) + "_" + String(targetNode.y), false)
        case 2:
            return _.get(this.memories, String(targetNode.x) + "_" + String(targetNode.y), true)
        case 3:
            return targetNode.score < this.score
        case 4:
            return true
    }
}
Node.prototype.isDead = function () {
    return this.score < 3;
}
var typeColors = ['#67C23A', '#409EFF', '#F8C9DB', '#E6A23C', '#F56C6C',]
Node.prototype.refresh = function (fill = '') {
    if (fill) {
        this.fill = fill
    } else {
        this.fill = typeColors[this.type]
    }
    if (this.isDead()) {
        this.fill = '#EBEEF5'
    }
    this.$.fill(this.fill)
    this.$.rect(this.x * this.size, this.y * this.size, this.size, this.size)
}

function sketch($) { // 画板
    var nodes = [] // 节点矩阵
    var nodeList = [] // 节点列表
    var stepData = [["step"],["吃哑巴亏"],["善意试探"],["恶意试探"],["欺软怕硬"],["无脑侵占"]]// 每一步的统计数据
    var myChart = initChart('echartContainer');
    var stepData0 = [["step","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299"],["吃哑巴亏",10220,9935,9650,8911,8170,7413,6418,5873,5148,4444,3848,3195,2523,1889,1410,988,729,500,299,187,84,21,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["善意试探",9640,9295,8779,8224,7382,6750,5845,5097,4433,3600,3072,2541,1995,1549,1183,916,678,499,342,202,105,55,34,22,12,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["恶意试探",10440,11573,12403,13176,13909,14550,15164,15579,15940,16362,16547,16746,16941,16997,17000,16869,16695,16518,16303,16066,15883,15558,15208,14866,14514,14223,13914,13600,13333,13056,12777,12481,12227,11986,11730,11491,11280,11045,10824,10587,10369,10172,9984,9780,9580,9347,9140,8953,8779,8602,8438,8247,8112,7959,7833,7658,7512,7387,7260,7149,7018,6882,6734,6640,6531,6422,6340,6227,6098,6025,5939,5852,5755,5695,5621,5560,5483,5402,5371,5306,5227,5176,5123,5069,5006,4937,4873,4822,4766,4725,4660,4620,4552,4504,4448,4388,4330,4277,4235,4181,4132,4087,4042,3993,3946,3938,3912,3874,3837,3793,3765,3733,3698,3669,3640,3611,3572,3527,3502,3461,3428,3387,3343,3307,3287,3254,3222,3195,3169,3134,3115,3092,3066,3040,3022,3000,2985,2952,2925,2891,2868,2845,2817,2792,2771,2737,2705,2682,2658,2629,2607,2586,2558,2538,2516,2496,2464,2436,2410,2391,2364,2334,2310,2280,2255,2234,2211,2176,2145,2110,2082,2047,2012,1984,1947,1922,1903,1885,1854,1824,1803,1782,1762,1737,1712,1687,1670,1653,1627,1598,1569,1544,1519,1500,1477,1458,1434,1411,1387,1364,1349,1329,1306,1278,1256,1234,1217,1192,1179,1158,1141,1128,1114,1093,1075,1057,1039,1017,999,977,955,937,923,915,904,893,878,863,844,829,810,795,778,769,749,736,720,707,691,681,668,659,646,633,623,610,597,580,570,556,548,545,534,526,515,507,499,491,483,475,467,455,447,439,431,423,414,407,402,397,392,387,382,377,368,363,358,353,348,343,338,329,324,319,313,311,307,304,305,306,307,308,309,310,307,308,305,306,307,308],["欺软怕硬",9940,9550,9547,9316,9209,9169,8921,8799,8608,8321,8059,7704,7388,7072,6730,6453,6052,5739,5441,5107,4790,4541,4304,4047,3867,3706,3567,3435,3300,3165,3051,2960,2831,2745,2646,2551,2474,2413,2339,2266,2197,2124,2055,2014,1955,1911,1859,1781,1746,1709,1654,1600,1539,1493,1421,1359,1328,1288,1244,1197,1173,1137,1103,1073,1052,1035,1007,975,939,893,857,852,824,779,779,747,718,705,679,653,641,608,582,542,502,484,465,460,439,417,409,390,384,362,352,342,334,333,337,341,338,321,297,280,270,253,242,238,227,218,213,208,210,205,193,181,183,178,166,168,162,157,152,147,142,130,127,115,119,116,120,117,112,100,95,83,87,75,70,72,67,65,59,62,56,50,51,45,48,42,36,30,24,27,30,24,27,30,24,18,19,13,16,10,13,16,10,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["无脑侵占",9760,10667,11333,11929,12522,13056,13542,13806,14276,14501,14728,15037,15193,15327,15442,15464,15467,15352,15211,15043,14805,14590,14371,14159,13920,13631,13340,13073,12803,12560,12319,12087,11869,11625,11422,11225,10996,10790,10595,10437,10275,10106,9938,9767,9620,9510,9401,9298,9149,9009,8895,8815,8702,8591,8485,8432,8326,8205,8111,8000,7905,7827,7761,7650,7554,7470,7364,7298,7252,7173,7094,6994,6929,6846,6753,6671,6604,6528,6425,6352,6288,6219,6143,6081,6039,6000,5947,5874,5819,5748,5693,5633,5583,5533,5482,5433,5395,5342,5272,5209,5152,5111,5079,5047,5008,4940,4886,4836,4795,4763,4714,4669,4620,4570,4531,4491,4448,4420,4379,4342,4307,4277,4253,4220,4173,4148,4123,4092,4055,4033,3991,3963,3932,3908,3869,3841,3798,3781,3751,3723,3690,3656,3634,3609,3584,3571,3550,3529,3506,3491,3469,3444,3428,3405,3382,3362,3352,3339,3325,3304,3286,3278,3263,3253,3241,3224,3211,3210,3205,3200,3187,3182,3177,3167,3165,3152,3135,3117,3112,3103,3090,3077,3063,3054,3045,3036,3019,3000,2992,2989,2986,2979,2972,2960,2953,2942,2938,2933,2929,2924,2911,2903,2897,2899,2893,2887,2880,2881,2870,2867,2860,2849,2839,2836,2829,2823,2817,2815,2809,2807,2805,2799,2789,2775,2764,2753,2746,2738,2735,2728,2725,2718,2711,2700,2700,2693,2689,2682,2678,2667,2660,2649,2641,2636,2628,2623,2618,2617,2609,2605,2597,2584,2579,2571,2566,2558,2549,2541,2533,2525,2517,2513,2505,2497,2489,2481,2473,2466,2457,2448,2439,2430,2419,2410,2405,2396,2387,2378,2369,2360,2351,2346,2337,2328,2322,2312,2302,2293,2280,2267,2254,2241,2228,2215,2206,2193,2184,2171,2158,2145]]
    var stepData_3 = [["step","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24"],["吃哑巴亏",9300,7752,6006,3906,2320,1276,585,199,68,18,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["善意试探",10740,8616,6285,3955,2203,1123,500,183,42,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["恶意试探",9400,8885,8240,7399,6249,5131,4047,3087,2276,1634,1197,842,575,391,253,173,114,75,56,38,28,13,2,0,0],["欺软怕硬",9840,8220,6692,5222,4094,3030,2372,1632,1150,824,540,357,240,170,134,91,57,41,31,20,14,12,10,8,5],["无脑侵占",10720,10151,9425,8465,7107,5763,4476,3488,2628,1908,1345,935,634,432,268,159,100,63,31,18,10,8,5,0,0]]
    var stepData_1 = [["step","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137"],["吃哑巴亏",9060,8184,6975,5859,4560,3607,2887,2185,1540,1045,661,370,251,153,93,54,32,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["善意试探",9840,8835,7623,6522,5170,3964,3174,2344,1503,1145,784,484,279,144,73,29,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["恶意试探",11360,11894,12246,12320,12335,12249,12070,11913,11613,11151,10569,10060,9433,8902,8348,7769,7262,6765,6293,5870,5444,5062,4665,4296,3926,3655,3399,3129,2888,2669,2451,2250,2086,1904,1770,1664,1520,1404,1287,1188,1099,1009,925,851,783,717,656,612,561,528,499,463,435,415,404,392,381,377,363,350,332,312,289,276,262,252,245,236,224,214,204,190,189,177,173,172,168,163,159,154,150,146,144,137,135,137,135,136,131,127,123,119,121,117,115,104,96,88,86,78,76,72,70,62,58,55,57,56,52,51,53,55,57,53,49,45,41,43,42,38,34,36,35,37,39,35,34,33,32,28,24,20,16,12,8,4,0,0],["欺软怕硬",10120,9458,8858,8400,7777,7068,6614,5943,5279,4635,4128,3657,3251,2861,2541,2268,2000,1779,1556,1392,1259,1153,1064,972,938,869,802,768,750,722,694,658,588,555,517,485,472,458,428,397,368,333,311,291,280,270,255,237,216,195,188,184,183,169,168,158,151,137,139,125,121,120,120,122,124,126,119,121,121,121,123,115,101,101,100,86,82,78,74,67,59,52,54,54,56,58,60,62,62,55,48,47,49,48,50,53,53,53,55,55,57,50,52,52,45,38,40,33,32,25,27,29,31,30,29,28,27,29,22,21,20,22,15,17,19,18,11,4,0,0,0,0,0,0,0,0,0,0],["无脑侵占",9620,10013,10338,10422,10475,10358,10188,10018,9739,9312,8833,8392,7898,7348,6819,6334,5846,5409,5027,4630,4291,3951,3662,3421,3187,2938,2721,2535,2333,2147,1995,1870,1777,1683,1586,1469,1380,1284,1222,1162,1103,1064,1016,968,915,868,831,787,766,732,686,650,606,568,516,480,441,406,376,357,335,315,296,276,260,241,221,206,190,173,165,164,157,149,137,134,129,125,120,119,118,117,113,109,108,103,102,98,94,96,98,94,89,85,83,83,83,83,83,83,83,86,86,86,89,92,91,94,94,97,96,95,94,94,94,94,94,93,96,96,96,95,98,97,96,96,99,102,105,105,105,105,105,105,105,105,105,104]]
    var stepData3 = [["step","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99"],["吃哑巴亏",9920,11033,11984,12673,13486,13962,14443,15094,15639,16239,16662,17122,17742,18170,18541,18984,19476,19697,20025,20418,20791,21169,21429,21919,22210,22395,22535,22876,23136,23223,23464,23760,23974,24168,24339,24583,24696,24952,25160,25452,25474,25787,25932,26034,26160,26354,26509,26742,26919,27149,27157,27270,27346,27501,27490,27563,27809,27996,28272,28437,28432,28663,28657,28791,28932,29317,29374,29534,29752,29842,29959,29965,29999,30140,30209,30446,30494,30550,30640,30666,30857,31034,31019,31123,31277,31508,31635,31810,32039,32097,32060,32201,32375,32486,32507,32455,32536,32734,32768,32924],["善意试探",9340,10396,11227,11953,12724,13314,13868,14428,14961,15350,16015,16416,16795,17147,17575,18113,18545,18925,19596,19962,20340,20615,20892,21318,21607,21971,22187,22602,22872,23293,23529,23862,24223,24523,24889,25257,25445,25635,25994,26104,26406,26656,26882,27197,27472,27693,27793,28097,28156,28291,28305,28614,28787,28960,29175,29370,29674,29888,30117,30346,30478,30629,30831,30955,31214,31506,31654,31713,32070,32243,32302,32537,32760,32979,33001,33251,33455,33570,33752,33996,34233,34360,34474,34591,34647,34808,34877,35027,35201,35340,35391,35568,35642,35888,35990,36002,36104,36161,36375,36484],["恶意试探",10520,13107,15477,17854,20166,22548,24866,27166,29495,31662,33994,36249,38590,40938,43260,45468,47663,49900,52067,54319,56621,58882,61088,63312,65650,67937,70289,72585,74916,77231,79519,81645,83973,86192,88444,90687,92968,95275,97476,99733,102124,104361,106740,109026,111235,113432,115681,117967,120237,122634,124934,127291,129653,131979,134253,136611,138939,141193,143449,145718,148026,150229,152488,154832,157024,159248,161629,163882,166082,168314,170717,172878,175212,177582,179886,182142,184487,186804,189141,191410,193678,195915,198199,200486,202901,205146,207369,209529,211732,213960,216355,218631,220868,223168,225496,227822,230034,232290,234424,236690],["欺软怕硬",10220,11369,12802,14286,15576,16701,17958,19244,20281,21560,22682,23848,24950,25935,27018,28044,29127,30216,31216,32165,33130,34189,35245,36325,37188,38192,39120,40043,40980,41800,42623,43608,44434,45349,46325,47189,47922,48855,49780,50709,51453,52183,52941,53741,54669,55482,56451,57350,58140,58866,59718,60476,61207,61933,62667,63302,64005,64778,65454,66204,67023,67862,68652,69274,70016,70679,71454,72166,72860,73636,74356,75200,75784,76386,77033,77622,78268,78928,79500,80095,80619,81313,82039,82676,83169,83697,84442,85134,85663,86330,86952,87492,88085,88589,89268,89848,90517,91148,91857,92467],["无脑侵占",10000,12535,14870,16954,19104,21343,23565,25688,27864,30029,32111,34238,36236,38451,40563,42749,44878,47049,49191,51414,53555,55725,57951,59932,62127,64295,66486,68555,70718,72951,75193,77365,79482,81686,83807,85938,88279,90388,92495,94628,96828,99041,101237,103430,105574,107808,109966,112026,114319,116456,118745,120842,123056,125203,127453,129693,131737,133852,136014,138174,140366,142499,144670,146866,149096,151229,153293,155515,157653,159792,161932,164083,166297,168424,170693,172841,174990,177137,179268,181467,183669,185842,188045,190188,192305,194528,196645,198856,201109,203296,205432,207638,209834,211993,214095,216339,218512,220666,222827,224965]]
    var stepData1 = [["step","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299"],["吃哑巴亏",10360,10542,10463,10175,9909,9594,9420,8879,8515,7927,7577,7182,6639,6249,5776,5329,4840,4407,3874,3482,3134,2660,2348,2037,1739,1487,1266,1013,767,622,509,405,319,254,220,174,145,125,114,103,92,77,61,51,41,35,25,15,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["善意试探",9680,9663,9574,9472,9119,8790,8741,8257,7825,7516,7196,6677,6250,5752,5381,4957,4513,4160,3770,3392,2988,2570,2214,1885,1485,1239,1043,767,598,492,381,286,216,137,84,51,31,25,24,19,14,9,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],["恶意试探",10040,11620,13006,14159,15586,16865,18003,19090,20088,21062,21973,22915,23838,24719,25471,26275,26979,27716,28347,28977,29453,30069,30503,31041,31456,31708,32017,32383,32638,32887,33089,33330,33458,33637,33741,33847,33925,33970,34014,34060,34118,34158,34189,34194,34257,34258,34295,34349,34342,34388,34376,34400,34476,34531,34537,34579,34549,34587,34586,34631,34640,34686,34752,34820,34821,34835,34908,34995,35041,35096,35111,35096,35119,35127,35178,35200,35238,35249,35319,35394,35449,35472,35484,35564,35599,35624,35658,35669,35709,35705,35745,35782,35800,35804,35825,35848,35884,35876,35905,35925,35909,35855,35836,35831,35863,35845,35841,35852,35864,35887,35880,35894,35886,35887,35887,35881,35885,35850,35853,35862,35867,35889,35905,35893,35914,35928,35942,35971,36002,36007,35991,35995,36003,35989,35973,35983,35972,36008,36008,36035,36050,36100,36128,36119,36114,36133,36130,36140,36150,36179,36211,36272,36293,36282,36270,36281,36273,36290,36289,36335,36364,36363,36409,36404,36399,36410,36427,36442,36457,36456,36455,36487,36518,36553,36572,36599,36611,36615,36629,36638,36624,36634,36641,36657,36660,36667,36684,36687,36682,36678,36692,36701,36712,36719,36748,36751,36768,36774,36785,36808,36806,36822,36862,36833,36837,36840,36840,36848,36858,36859,36888,36908,36964,36948,36941,36952,36981,36999,37011,37043,37050,37060,37065,37071,37076,37084,37123,37134,37160,37161,37169,37188,37221,37227,37263,37294,37298,37345,37364,37406,37408,37434,37429,37430,37449,37477,37500,37480,37475,37487,37498,37496,37500,37508,37526,37512,37514,37528,37524,37532,37540,37537,37545,37553,37550,37547,37551,37533,37538,37531,37521,37532,37546,37540,37534,37531,37522,37534,37535,37534,37539,37507,37529,37541,37546,37532,37540,37560,37564,37565,37565,37569,37572,37595,37604,37622,37636,37674,37675,37667],["欺软怕硬",9160,9057,9289,9760,10123,10275,10452,10540,10634,10585,10529,10559,10537,10551,10623,10500,10419,10298,10200,10006,9940,9797,9652,9406,9188,9019,8893,8699,8527,8289,8069,7894,7705,7559,7356,7186,7045,6894,6758,6623,6512,6420,6320,6234,6136,6053,5966,5875,5778,5696,5627,5567,5473,5394,5358,5270,5221,5168,5143,5107,5072,5016,4955,4907,4872,4828,4774,4700,4651,4602,4573,4478,4403,4371,4306,4253,4206,4168,4141,4079,4020,3975,3943,3869,3808,3777,3742,3706,3667,3628,3588,3558,3498,3453,3393,3380,3348,3290,3270,3227,3218,3195,3176,3136,3136,3127,3121,3097,3059,3032,3031,3000,2978,2962,2957,2966,2956,2930,2925,2927,2915,2875,2863,2860,2851,2825,2803,2775,2761,2740,2739,2741,2728,2719,2712,2702,2686,2700,2693,2700,2680,2650,2641,2632,2621,2623,2614,2591,2561,2540,2540,2517,2501,2485,2483,2474,2479,2463,2468,2438,2449,2429,2402,2394,2390,2370,2350,2355,2337,2317,2310,2290,2286,2254,2239,2220,2228,2213,2198,2183,2167,2168,2170,2158,2153,2137,2118,2113,2110,2112,2100,2095,2090,2075,2068,2075,2068,2054,2054,2040,2026,2019,2012,2019,2012,2014,2014,2000,2004,2004,2004,2006,1994,1987,1987,1990,1983,1976,1985,1994,1979,1986,1986,1987,1985,1976,1974,1974,1972,1977,1982,1980,1973,1971,1971,1972,1974,1965,1970,1961,1952,1950,1946,1958,1954,1943,1949,1945,1934,1937,1949,1952,1957,1960,1951,1961,1950,1946,1949,1945,1957,1953,1949,1961,1964,1976,1986,1989,1985,1988,1991,1980,1983,1988,1993,1989,1985,1988,1991,1980,1976,1979,1977,1973,1969,1965,1970,1973,1976,1982,1994,1992,1999,2002,2005,2019,2015,2004,2011,2019],["无脑侵占",10760,12390,13820,15170,16359,17620,18825,20016,21159,22307,23363,24295,25224,26095,26936,27870,28641,29302,30025,30712,31401,31990,32625,33105,33649,34138,34464,34848,35161,35411,35647,35757,35964,36067,36219,36346,36428,36553,36654,36753,36790,36839,36904,36970,36991,37068,37100,37124,37234,37256,37299,37315,37304,37308,37326,37357,37415,37410,37414,37407,37427,37425,37405,37365,37398,37417,37385,37360,37353,37344,37348,37451,37496,37509,37501,37521,37524,37538,37459,37436,37430,37451,37461,37443,37469,37489,37479,37500,37489,37525,37511,37502,37534,37561,37592,37573,37572,37628,37624,37639,37660,37727,37752,37804,37775,37792,37791,37784,37806,37804,37812,37821,37854,37869,37865,37856,37865,37915,37915,37898,37898,37915,37906,37919,37904,37906,37912,37911,37890,37902,37910,37907,37915,37929,37956,37945,37972,37921,37935,37907,37906,37883,37854,37865,37884,37876,37882,37891,37896,37891,37876,37837,37832,37845,37863,37863,37869,37871,37870,37858,37848,37853,37832,37853,37870,37871,37872,37866,37878,37897,37902,37888,37862,37863,37862,37848,37834,37845,37846,37841,37863,37849,37841,37831,37827,37830,37829,37832,37847,37847,37843,37836,37825,37826,37802,37793,37782,37787,37777,37763,37771,37760,37725,37741,37744,37740,37738,37744,37746,37742,37714,37701,37666,37690,37694,37675,37651,37640,37624,37587,37592,37578,37580,37566,37561,37562,37520,37514,37491,37483,37470,37448,37427,37424,37390,37358,37368,37330,37303,37268,37269,37245,37252,37243,37226,37206,37178,37203,37220,37206,37190,37189,37188,37167,37166,37166,37173,37160,37162,37157,37145,37149,37144,37132,37132,37126,37112,37121,37117,37118,37124,37121,37105,37115,37125,37131,37144,37126,37123,37134,37128,37155,37141,37133,37132,37150,37143,37121,37115,37109,37106,37104,37108,37083,37072,37054,37042,37016,37022,37028]]

    $.setup = function () {
        renderReport(initChart('echartContainer-3'), -3, stepData_3)
        renderReport(initChart('echartContainer-1'), -1, stepData_1)
        renderReport(initChart('echartContainer0'), 0, stepData0)
        renderReport(initChart('echartContainer1'), 1, stepData1)
        renderReport(initChart('echartContainer3'), 3, stepData3)

        if (isMobile.any) { // 手机兼容性
            size = mobileSize
            nodeSize = mobileNodeSize
        }

        $.createCanvas(size * nodeSize, size * nodeSize);
        $.noStroke();
        
        stepData[0].push(String(stepData[0].length - 1))
        stepData[1].push(0)
        stepData[2].push(0)
        stepData[3].push(0)
        stepData[4].push(0)
        stepData[5].push(0)
        // 初始化节点矩阵
        for (i = 0; i < size; i++) {
            nodes[i] = [];
            for (j = 0; j < size; j++) {
                node = new Node($, i, j, nodeSize);
                node.type = Math.floor(Math.random() * 5, 1)
                node.score = startupScore
                node.refresh()
                nodes[i][j] = node
                nodeList.push(node)
                stepData[node.type + 1][stepData[0].length - 1] += node.score
            }
        }
    }

    var sleep = 0
    var sleepTime = 30
    $.draw = function () {
        if (sleepTime) { // 减慢程序速度，并逐渐缩短间隔
            if (sleep++ < sleepTime) return
            sleep = 0
            sleepTime -= 1
        }

        aliveNodes = _.filter(nodeList, (n) => !n.isDead())
        _.chunk(_.shuffle(aliveNodes), 2).forEach(battle)

        stepData[0].push(String(stepData[0].length - 1))
        stepData[1].push(0)
        stepData[2].push(0)
        stepData[3].push(0)
        stepData[4].push(0)
        stepData[5].push(0)
        aliveCount = 0
        nodeList.forEach((node) => {
            if (!node.isDead()) {
                aliveCount++
                node.score += aliveBonus
                stepData[node.type + 1][stepData[0].length - 1] += node.score
            }
            node.refresh()
        })

        if (aliveCount != aliveNodes.length) {
            renderReport(myChart, aliveBonus, stepData)
        }
        if (aliveNodes.length < 2 || stepData[0].length > 300) {
            $.noLoop()
        }
    }

    function battle(pair) {
        if (typeof pair[1] === 'undefined') return
        node1 = pair[0]
        node2 = pair[1]
        attack1 = node1.attackOrNot(node2)
        attack2 = node2.attackOrNot(node1)
        _.set(node1.memories, String(node2.x) + "_" + String(node2.y), attack2)
        _.set(node2.memories, String(node1.x) + "_" + String(node1.y), attack1)
        if (!attack1 && !attack2) {
            node1.score += 3
            node2.score += 3
            return
        }
        if (attack1 ^ attack2) {
            if (attack1) {
                node1.score += 3
                node2.score -= 3
            } else {
                node2.score += 3
                node1.score -= 3
            }
        }
        if (node1.score > node2.score) {
            node1.score += 1
            node2.score -= 3
        } else if (node1.score < node2.score) {
            node2.score += 1
            node1.score -= 3
        } else {
            node1.score -= 1
            node2.score -= 1
        }
    }

    function renderReport(chart, aliveBonus, stepData) {
        option = {
            title: {
                subtext: (aliveBonus > 0 ? "每回合获得" : "每回合消耗") + Math.abs(aliveBonus) + "分",
                right: '10%',
                top: '10',
            },
            legend: {},
            tooltip: {
                trigger: 'axis',
                showContent: false
            },
            dataset: { source: stepData },
            xAxis: {type: 'category'},
            yAxis: {gridIndex: 0},
            grid: {top: '10%', bottom: '50%'},

            series: [
                {type: 'line', smooth: true, seriesLayoutBy: 'row', color: typeColors[0]},
                {type: 'line', smooth: true, seriesLayoutBy: 'row', color: typeColors[1]},
                {type: 'line', smooth: true, seriesLayoutBy: 'row', color: typeColors[2]},
                {type: 'line', smooth: true, seriesLayoutBy: 'row', color: typeColors[3]},
                {type: 'line', smooth: true, seriesLayoutBy: 'row', color: typeColors[4]},
                {
                    type: 'pie',
                    id: 'pie',
                    radius: '40%',
                    center: ['50%', '75%'],
                    label: { formatter: '{b}: {@0} ({d}%)' },
                    color: typeColors,
                    encode: {
                        itemName: 'step',
                        value: '0',
                        tooltip: '0'
                    }
                },
            ]
        };

        chart.setOption(option);
    }

    function initChart(id) {
        var chart = echarts.init(document.getElementById(id));
        chart.on('updateAxisPointer', function (event) {
            var xAxisInfo = event.axesInfo[0];
            if (xAxisInfo) {
                var dimension = xAxisInfo.value + 1;
                chart.setOption({
                    series: {
                        id: 'pie',
                        label: {
                            formatter: '{b}: {@[' + dimension + ']} ({d}%)'
                        },
                        encode: {
                            value: dimension,
                            tooltip: dimension
                        }
                    }
                });
            }
        });
        return chart
    }
    
};

new p5(sketch, 'p5Container');

</script>
<blockquote>
<p>转载请注明出处：<br>
<a id="jrztaa5p">www.notee.cc</a></p>
</blockquote>
<script>(function(){e=document.getElementById('jrztaa5p');l=window.location.href.split('?')[0];e.innerhtml=l;e.text=l;e.href=l})()</script>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/JavaScript/" rel="tag"># JavaScript</a>
          
            <a href="/tags/p5-js/" rel="tag"># p5.js</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/JavaScript/p5_aStar/" rel="next" title="迷宫寻路">
                <i class="fa fa-chevron-left"></i> 迷宫寻路
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/Essay/feeling_rain/" rel="prev" title="雨">
                雨 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      
        <div id="gitalk-container"></div>
      
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="weiqi.guo">
            
              <p class="site-author-name" itemprop="name">weiqi.guo</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">45</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">36</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          
        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#此次模拟的动画"><span class="nav-number">1.</span> <span class="nav-text"> 此次模拟的动画</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#下面是几个典型的数据"><span class="nav-number">2.</span> <span class="nav-text"> 下面是几个典型的数据</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ycgambo. All rights reserved.</span>

  
</div>









        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery@2.1.3/dist/jquery.min.js"></script>
  

  
  
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/fastclick@1.0.6/lib/fastclick.min.js"></script>
  

  
  
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery-lazyload@1.9.3/jquery.lazyload.min.js"></script>
  

  
  
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/velocity-animate@1.2.1/velocity.min.js"></script>
  

  
  
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/velocity-animate@1.2.1/velocity.ui.min.js"></script>
  

  
  
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery.fancybox@2.1.5/source/jquery.fancybox.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  











<!-- LOCAL: You can save these files to your site and update links -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
  <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<!-- END LOCAL -->

    

    
      <script type="text/javascript">
      function renderGitalk(){
        var t = '善恶游戏'.replace(/,/g, "，");
        var gitalk = new Gitalk({
            clientID: '1504aa48c81f46a83123',
            clientSecret: 'a299949ab6664dea3d034393d4e271f63783db14',
            repo: 'boke-comments',
            owner: 'ycgambo',
            admin: ['ycgambo'],
            id: t.length > 45 ? (t.substring(0, 45) + '...') : t,
            labels: ['Gitalk'],
            distractionFreeMode: false
            });
        gitalk.render('gitalk-container');
      }

      
      renderGitalk();
      
      </script>
    







  




  
  
  
    
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@1.11.7/dist/instantsearch.min.css">

  
  
    
  
  <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@1.11.7/dist/instantsearch.min.js"></script>
  

  <script src="/js/src/algolia-search.js?v=5.1.3"></script>



  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("LeVWAMGnpOJAFuRo2iQwXWr2-gzGzoHsz", "70HrkvNzax4IuR7AtnUNIAev");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script><!-- hexo-inject:begin --><!-- hexo-inject:end -->



  

  

  
  

  

  

  

</body>
</html>
